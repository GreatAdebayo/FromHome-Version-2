{"ast":null,"code":"import _toConsumableArray from\"C:/xampp/htdocs/FROMHOME/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/xampp/htdocs/FROMHOME/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Formik,Form,Field,ErrorMessage}from'formik';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import axios from'axios';import{Baseurl}from'../../../baseurl';import{useHistory}from'react-router';import{useLocation}from'react-router';import{Link}from'react-router-dom';import{useParams}from'react-router';import{useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ManageSections=function ManageSections(){var _useParams=useParams(),code=_useParams.code;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),section=_useState2[0],setSection=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showloader=_useState4[0],setShowloader=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),sectionVideo=_useState6[0],setSectionVideo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFecthing=_useState8[0],setIsFecthing=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),sectionName=_useState10[0],setSectionName=_useState10[1];var newSectionName=useRef();useEffect(function(){var section=JSON.parse(localStorage.getItem('sections'));setSection(section);},[]);var deletevideo=function deletevideo(id,index){axios.post(\"\".concat(Baseurl,\"deletevideo\"),{id:id}).then(function(res){if(res.data==='deleted'){var newSection=_toConsumableArray(sectionVideo);newSection.splice(index,1);setSectionVideo(newSection);toast(\"👍 Video Deleted!\",{autoClose:2000});}});};var editSection=function editSection(id,name){setIsFecthing(true);setSectionName(name);axios.get(\"\".concat(Baseurl,\"sectiondetails\"),{params:{id:id}}).then(function(res){setIsFecthing(false);setSectionVideo(res.data.videos);});};// const addSection = (e) =>{\n// e.preventDefault();\n// let newName = newSectionName.current.value;\n// if(newName){\n//     axios.post(`${Baseurl}addsection`, {code:code, sectionName:newName}).then((res)=>{\n//         console.log(res.data)\n//     })\n// }\n// }\nvar editSectionName=function editSectionName(e){e.preventDefault();var newName=newSectionName.current.value;if(newName){axios.post(\"\".concat(Baseurl,\"editsectionname\"),{code:code,sectionName:newName}).then(function(res){console.log(res.data);});}};var uploadCourse=function uploadCourse(){// setShowloader(true)\n// let values = formikPersist.values\n// if (values) {\n//     if (values.category && values.desc && values.title && values.sections.length) {\n//         let token = sessionStorage.Token\n//         values.token = token\n//         axios.post(`${Baseurl}postcourse`, values).then((res) => {\n//             if (res.data) {\n//                 if (res.data === 'pending') {\n//                     setShowloader(false)\n//                     toast(\"✋  You have a Pending Course, Please Add Files!\", {\n//                         autoClose: 2000,\n//                     })\n//                     setTimeout(() => history.push('/dashboard/create-a-course/videos'), 2000)\n//                 } else {\n//                     setShowloader(false)\n//                     toast(\"👍 Succesfully Uploaded, Add Course Videos!\", {\n//                         autoClose: 2000,\n//                     })\n//                     localStorage.setItem('code', res.data)\n//                     localStorage.removeItem('course')\n//                     setTimeout(() => history.push('/dashboard/create-a-course/videos'), 2000)\n//                 }\n//             }\n//         }).catch((error) => {\n//             if (error) {\n//                 if (error.response.status === 500) {\n//                     setShowloader(false)\n//                     toast(\"✋  Please Login to continue!\", {\n//                         autoClose: 2000,\n//                     })\n//                     history.push('/login')\n//                     sessionStorage.setItem('Path', path.pathname)\n//                 }\n//             }\n//         })\n//     } else {\n//         setShowloader(false)\n//         toast(\"✋  Please fill all basic course details!\", {\n//             autoClose: 2000,\n//         })\n//         setTimeout(() => history.goBack(), 2000)\n//     }\n// } else {\n//     setShowloader(false)\n//     toast(\"✋  No course found!\", {\n//         autoClose: 2000,\n//     })\n// }\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"about container-fluid mt-3\",id:\"about\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(ToastContainer,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-9 col-sm mx-auto\",\"data-aos\":\"fade-in\",\"data-aos-delay\":\"100\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"login-card\",style:{borderRadius:'10px'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCDA Course Manager\"}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-edit\",style:{color:'#071B4D'}}),\"*Edit Course sections\"]})}),/*#__PURE__*/_jsx(Formik,{initialValues:{section:''},validate:function validate(values){var errors={};if(!values.section){errors.section='*Section name is required';}return errors;},onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;axios.post(\"\".concat(Baseurl,\"addsection\"),{code:code,sectionName:values.section}).then(function(res){if(res.data){section.push(res.data);setSection(section);localStorage.setItem('sections',JSON.stringify(section));setSubmitting(false);}});},children:function children(_ref2){var isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/_jsxs(Form,{children:[section.length?/*#__PURE__*/_jsx(\"div\",{class:\"row-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:section.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-sm-5 mx-auto py-2 text-center\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-edit text-danger\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#exampleModal\",onClick:function onClick(){return editSection(item.id,item.section_name);}}),\" Edit Section \",index+1]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 py-1 text-light section-loop\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-capitalize\",children:[item.section_name,\" \"]})})]});})})}):'',/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Section Names\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(Field,{type:\"text\",placeholder:\"Type in section names\",name:\"section\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"section\",component:\"small\",className:\"text-danger\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"border-0 bg-transparent outline-0\",style:{color:'#0D826E',cursor:'pointer'},type:\"submit\",children:[isSubmitting?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-plus-square\",style:{color:'#071B4D'}}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Click to Add New Section\"})})]})]});}}),/*#__PURE__*/_jsx(\"button\",{class:\"btn d-flex mx-auto\",type:\"submit\",onClick:uploadCourse,children:/*#__PURE__*/_jsxs(\"b\",{children:[showloader?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):'',\" \",/*#__PURE__*/_jsx(\"small\",{children:\"Update Section\"})]})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:\"*Cross-check before you upload course\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard/created-courses/manage/edit-basic-details/\".concat(code),style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"strong\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-long-arrow-left\",style:{color:'#0D826E'}}),\" Edit Basic Details \"]})})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade\",id:\"exampleModal\",tabindex:\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"modal-header\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"modal-title text-capitalize\",id:\"exampleModalLabel\",children:/*#__PURE__*/_jsx(\"strong\",{children:sectionName})}),/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-times-square\",style:{color:'#0D826E',fontSize:'25px'},\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"modal-body\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Edit Section Name\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:editSectionName,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Edit Section Name\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type new section name\",ref:newSectionName})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"border-0 bg-transparent outline-0\",style:{color:'#0D826E',cursor:'pointer'},type:\"submit\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-plus-square\",style:{color:'#071B4D'}}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Click to Save\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Edit Section Videos\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 py-1 text-light section-loop text-center\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-capitalize\",children:isFecthing?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):/*#__PURE__*/_jsx(_Fragment,{children:sectionVideo.length?sectionVideo.map(function(item,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"small\",{className:\"text-capitalize\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-trash text-danger\",onClick:function onClick(){return deletevideo(item.id,index);}}),\" \",item.video_name]},index),/*#__PURE__*/_jsx(\"br\",{})]});}):/*#__PURE__*/_jsx(\"small\",{children:\"No Course Video\"})})})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Add New Section Video\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{class:\"row row-2\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control form-control-sm mt-2\",id:\"formFileSm\",type:\"file\"})})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"border-0 bg-transparent outline-0\",style:{color:'#0D826E',cursor:'pointer'},type:\"submit\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-plus-square\",style:{color:'#071B4D'}}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Click to Add Video\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Edit Section Files\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 py-1 text-light section-loop text-center\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-capitalize\",children:[/*#__PURE__*/_jsx(\"strong\",{children:/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-trash text-danger\"})}),\" cccccccc \"]})})]}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Add New Section File\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{class:\"row row-2\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control form-control-sm mt-2\",id:\"formFileSm\",type:\"file\"})})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"border-0 bg-transparent outline-0\",style:{color:'#0D826E',cursor:'pointer'},type:\"submit\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-plus-square\",style:{color:'#071B4D'}}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Click to Add File\"})})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Delete Section\"})})})]})})})]});};export default ManageSections;","map":{"version":3,"sources":["C:/xampp/htdocs/FROMHOME/frontend/src/components/dashboard/tutor/manage_course/edit_sections.js"],"names":["React","useState","useEffect","Formik","Form","Field","ErrorMessage","ToastContainer","toast","axios","Baseurl","useHistory","useLocation","Link","useParams","useRef","ManageSections","code","section","setSection","showloader","setShowloader","sectionVideo","setSectionVideo","isFecthing","setIsFecthing","sectionName","setSectionName","newSectionName","JSON","parse","localStorage","getItem","deletevideo","id","index","post","then","res","data","newSection","splice","autoClose","editSection","name","get","params","videos","editSectionName","e","preventDefault","newName","current","value","console","log","uploadCourse","borderRadius","color","values","errors","setSubmitting","push","setItem","stringify","isSubmitting","length","map","item","section_name","cursor","fontSize","video_name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from 'axios';\r\nimport { Baseurl } from '../../../baseurl';\r\nimport { useHistory } from 'react-router';\r\nimport { useLocation } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { useParams } from 'react-router';\r\nimport { useRef } from 'react';\r\n\r\n\r\n\r\nconst ManageSections = () => {\r\n    const { code } = useParams();\r\n    const [section, setSection] = useState([])\r\n    const [showloader, setShowloader] = useState(false)\r\n    const [sectionVideo, setSectionVideo] = useState([])\r\n    const [isFecthing, setIsFecthing] = useState(false)\r\n    const [sectionName, setSectionName] = useState('')\r\n    const newSectionName = useRef();\r\n\r\n    useEffect(() => {\r\n        let section = JSON.parse(localStorage.getItem('sections'))\r\n        setSection(section)\r\n    }, [])\r\n\r\n\r\n    const deletevideo = (id, index) => {\r\n        axios.post(`${Baseurl}deletevideo`, { id: id }).then((res) => {\r\n            if (res.data === 'deleted') {\r\n                const newSection = [...sectionVideo]\r\n                newSection.splice(index, 1);\r\n                setSectionVideo(newSection)\r\n                toast(\"👍 Video Deleted!\", {\r\n                    autoClose: 2000,\r\n                })\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n    const editSection = (id, name) => {\r\n        setIsFecthing(true)\r\n        setSectionName(name)\r\n        axios.get(`${Baseurl}sectiondetails`, {\r\n            params: { id: id }\r\n        }).then((res) => {\r\n            setIsFecthing(false)\r\n            setSectionVideo(res.data.videos)\r\n        })\r\n    }\r\n\r\n    // const addSection = (e) =>{\r\n    // e.preventDefault();\r\n    // let newName = newSectionName.current.value;\r\n    // if(newName){\r\n    //     axios.post(`${Baseurl}addsection`, {code:code, sectionName:newName}).then((res)=>{\r\n    //         console.log(res.data)\r\n    //     })\r\n    // }\r\n    // }\r\n\r\n    const editSectionName = (e) =>{\r\n        e.preventDefault();\r\n        let newName = newSectionName.current.value;\r\n        if(newName){\r\n            axios.post(`${Baseurl}editsectionname`, {code:code, sectionName:newName}).then((res)=>{\r\n                console.log(res.data)\r\n            })\r\n        }\r\n    }\r\n\r\n    const uploadCourse = () => {\r\n        // setShowloader(true)\r\n        // let values = formikPersist.values\r\n        // if (values) {\r\n        //     if (values.category && values.desc && values.title && values.sections.length) {\r\n        //         let token = sessionStorage.Token\r\n        //         values.token = token\r\n        //         axios.post(`${Baseurl}postcourse`, values).then((res) => {\r\n        //             if (res.data) {\r\n        //                 if (res.data === 'pending') {\r\n        //                     setShowloader(false)\r\n        //                     toast(\"✋  You have a Pending Course, Please Add Files!\", {\r\n        //                         autoClose: 2000,\r\n        //                     })\r\n        //                     setTimeout(() => history.push('/dashboard/create-a-course/videos'), 2000)\r\n        //                 } else {\r\n        //                     setShowloader(false)\r\n        //                     toast(\"👍 Succesfully Uploaded, Add Course Videos!\", {\r\n        //                         autoClose: 2000,\r\n        //                     })\r\n        //                     localStorage.setItem('code', res.data)\r\n        //                     localStorage.removeItem('course')\r\n        //                     setTimeout(() => history.push('/dashboard/create-a-course/videos'), 2000)\r\n        //                 }\r\n        //             }\r\n        //         }).catch((error) => {\r\n        //             if (error) {\r\n        //                 if (error.response.status === 500) {\r\n        //                     setShowloader(false)\r\n        //                     toast(\"✋  Please Login to continue!\", {\r\n        //                         autoClose: 2000,\r\n        //                     })\r\n        //                     history.push('/login')\r\n        //                     sessionStorage.setItem('Path', path.pathname)\r\n        //                 }\r\n        //             }\r\n        //         })\r\n\r\n        //     } else {\r\n        //         setShowloader(false)\r\n        //         toast(\"✋  Please fill all basic course details!\", {\r\n        //             autoClose: 2000,\r\n        //         })\r\n        //         setTimeout(() => history.goBack(), 2000)\r\n        //     }\r\n        // } else {\r\n        //     setShowloader(false)\r\n        //     toast(\"✋  No course found!\", {\r\n        //         autoClose: 2000,\r\n        //     })\r\n        // }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className=\"about container-fluid mt-3\" id=\"about\">\r\n                <small><ToastContainer /></small>\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-9 col-sm mx-auto\" data-aos=\"fade-in\" data-aos-delay=\"100\">\r\n                        <div class=\"login-card\" style={{ borderRadius: '10px' }}>\r\n                            <p>📚 Course Manager</p>\r\n                            <small><strong><i class=\"fad fa-edit\" style={{ color: '#071B4D' }}></i>*Edit Course sections</strong></small>\r\n                            <Formik\r\n                                initialValues={{ section: '' }}\r\n                                validate={values => {\r\n                                    const errors = {};\r\n                                    if (!values.section) {\r\n                                        errors.section = '*Section name is required';\r\n                                    }\r\n                                    return errors;\r\n                                }}\r\n                                onSubmit={(values, { setSubmitting }) => {\r\n                                    axios.post(`${Baseurl}addsection`, { code: code, sectionName: values.section }).then((res) => {\r\n                                        if (res.data) {\r\n                                            section.push(res.data)\r\n                                            setSection(section)\r\n                                            localStorage.setItem('sections', JSON.stringify(section))\r\n                                            setSubmitting(false);\r\n                                        }\r\n                                    })\r\n\r\n                                }}\r\n                            >\r\n                                {({ isSubmitting }) => (\r\n\r\n                                    <Form>\r\n\r\n                                        {section.length ? <div class=\"row-1\">\r\n                                            <div className='row'>\r\n\r\n                                                {section.map((item, index) => {\r\n                                                    return (\r\n\r\n                                                        <div className='col-md-6 col-sm-5 mx-auto py-2 text-center'>\r\n                                                            <small><strong><i class=\"fas fa-edit text-danger\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\" onClick={() => editSection(item.id, item.section_name)}></i> Edit Section {index + 1}</strong></small>\r\n                                                            <div className='mb-2 py-1 text-light section-loop'>\r\n                                                                <small className='text-capitalize'>{item.section_name} </small>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    )\r\n                                                })}\r\n                                            </div>\r\n                                        </div> : ''}\r\n                                        <div class=\"row-1\">\r\n                                            <div class=\"row row-2\"> <span id=\"login-card-inner\">Section Names</span> </div>\r\n                                            <div class=\"row row-2\"> <Field type=\"text\" placeholder=\"Type in section names\" name=\"section\" />\r\n                                                <ErrorMessage name=\"section\" component=\"small\" className='text-danger' />\r\n                                            </div>\r\n                                        </div>\r\n                                        <button className='border-0 bg-transparent outline-0' style={{ color: '#0D826E', cursor: 'pointer' }} type=\"submit\" >{isSubmitting ? <i class=\"fas fa-spinner fa-spin\"></i> : <i class=\"fad fa-plus-square\" style={{ color: '#071B4D' }}></i>}<small><strong> Click to Add New Section</strong></small></button>\r\n                                    </Form>\r\n                                )}\r\n                            </Formik>\r\n\r\n                            <button class=\"btn d-flex mx-auto\" type=\"submit\" onClick={uploadCourse}><b>{showloader ? <i class=\"fas fa-spinner fa-spin\"></i> : ''} <small>Update Section</small></b></button>\r\n                            <small className='text-danger'>*Cross-check before you upload course</small><br />\r\n\r\n                            <Link to={`/dashboard/created-courses/manage/edit-basic-details/${code}`} style={{ cursor: 'pointer' }}><strong><small><i class=\"fal fa-long-arrow-left\" style={{ color: '#0D826E' }}></i> Edit Basic Details </small></strong></Link>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </section>\r\n\r\n            {/* Modal */}\r\n            <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n                            <p class=\"modal-title text-capitalize\" id=\"exampleModalLabel\"><strong>{sectionName}</strong></p>\r\n                            <i class=\"fad fa-times-square\" style={{ color: '#0D826E', fontSize: '25px' }} data-bs-dismiss=\"modal\" aria-label=\"Close\"></i>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            {/* section name */}\r\n                            <small><strong>Edit Section Name</strong></small>\r\n                            <form onSubmit={editSectionName}>\r\n                                <div class=\"row-1\">\r\n                                    <div class=\"row row-2\"> <span id=\"login-card-inner\">Edit Section Name</span> </div>\r\n                                    <div class=\"row row-2\"> <input type=\"text\" placeholder=\"Type new section name\" ref={newSectionName} />\r\n                                    </div>\r\n                                </div>\r\n                                <button className='border-0 bg-transparent outline-0' style={{ color: '#0D826E', cursor: 'pointer' }} type=\"submit\" ><i class=\"fad fa-plus-square\" style={{ color: '#071B4D' }}></i><small><strong> Click to Save</strong></small></button>\r\n                            </form>\r\n                            {/* //section videos */}\r\n                            <div className='mt-4'>\r\n                                <small><strong>Edit Section Videos</strong></small>\r\n                                <div className='mb-2 py-1 text-light section-loop text-center'>\r\n                                    <small className='text-capitalize'>\r\n                                        {isFecthing ? <i class=\"fas fa-spinner fa-spin\"></i> : <>\r\n                                            {sectionVideo.length ? sectionVideo.map((item, index) => {\r\n                                                return (\r\n                                                    <>\r\n                                                        <small className='text-capitalize' key={index}><i class=\"fad fa-trash text-danger\" onClick={() => deletevideo(item.id, index)}></i> {item.video_name}</small><br/>\r\n                                                    </>\r\n                                                )\r\n                                            }) : <small>No Course Video</small>}</>}\r\n                                    </small>\r\n                                </div>\r\n                                <form>\r\n                                    <div class=\"row-1\">\r\n                                        <div class=\"row row-2\"> <span id=\"login-card-inner\">Add New Section Video</span> </div>\r\n                                        <div class=\"row row-2\">\r\n                                            <input class=\"form-control form-control-sm mt-2\" id=\"formFileSm\" type=\"file\"\r\n                                            />\r\n                                            {/* {showVideoError ? <small className='text-danger'>*Please choose a file</small> : ''} */}\r\n                                        </div>\r\n                                    </div>\r\n                                    <button className='border-0 bg-transparent outline-0' style={{ color: '#0D826E', cursor: 'pointer' }} type=\"submit\" ><i class=\"fad fa-plus-square\" style={{ color: '#071B4D' }}></i><small><strong> Click to Add Video</strong></small></button>\r\n                                </form>\r\n\r\n                                {/* section files */}\r\n                                <div className='mt-4'>\r\n                                    <small><strong>Edit Section Files</strong></small>\r\n                                    <div className='mb-2 py-1 text-light section-loop text-center'>\r\n                                        <small className='text-capitalize'><strong><i class=\"fad fa-trash text-danger\"></i></strong> cccccccc </small>\r\n                                    </div>\r\n                                </div>\r\n                                <form>\r\n                                    <div class=\"row-1\">\r\n                                        <div class=\"row row-2\"> <span id=\"login-card-inner\">Add New Section File</span> </div>\r\n                                        <div class=\"row row-2\">\r\n                                            <input class=\"form-control form-control-sm mt-2\" id=\"formFileSm\" type=\"file\"\r\n                                            />\r\n                                            {/* {showVideoError ? <small className='text-danger'>*Please choose a file</small> : ''} */}\r\n                                        </div>\r\n                                    </div>\r\n                                    <button className='border-0 bg-transparent outline-0' style={{ color: '#0D826E', cursor: 'pointer' }} type=\"submit\" ><i class=\"fad fa-plus-square\" style={{ color: '#071B4D' }}></i><small><strong> Click to Add File</strong></small></button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button type=\"button\" class=\"btn\"><small>Delete Section</small></button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ManageSections"]},"metadata":{},"sourceType":"module"}