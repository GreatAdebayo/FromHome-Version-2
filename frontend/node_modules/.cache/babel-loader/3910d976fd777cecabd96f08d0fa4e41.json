{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\FROMHOME\\\\frontend\\\\src\\\\components\\\\dashboard\\\\withdraw.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport axios from 'axios';\nimport { Baseurl } from '../baseurl';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport { useLocation } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Withdraw = ({\n  profile\n}) => {\n  _s();\n\n  const history = useHistory();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"page-content page-container mx-auto mb-5\",\n      id: \"page-content\",\n      style: {\n        marginTop: '100px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"small\", {\n        children: /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 24\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"row container d-flex justify-content-center mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col-md\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"profile-card user-card-full\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row m-l-0 m-r-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-sm-4 bg-c-lite-green user-profile\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"card-block text-center text-white\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"m-b-25\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"https://img.icons8.com/bubbles/100/000000/user.png\",\n                      class: \"img-radius\",\n                      alt: \"User\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 24,\n                      columnNumber: 62\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 24,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: `Balance: â‚¦${profile.earnings ? profile.earnings : 0}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 25,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 25,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/dashboard/earnings-withdraw\",\n                    class: \"badge p-2 text-light\",\n                    style: {\n                      cursor: 'pointer',\n                      backgroundColor: '#294E51'\n                    },\n                    children: \"History\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 26,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 23,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 22,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col-sm-8\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"card-block\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    class: \"m-b-20 p-b-5 b-b-default f-w-600\",\n                    children: \"Earnings Withdrawal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 31,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Formik, {\n                    initialValues: {\n                      amount: '',\n                      pin: ''\n                    },\n                    validate: values => {\n                      const errors = {};\n\n                      if (!values.amount) {\n                        errors.amount = '*Amount Required';\n                      } else if (!values.pin) {\n                        errors.pin = '*Transaction Pin Required';\n                      }\n\n                      return errors;\n                    },\n                    onSubmit: (values, {\n                      setSubmitting\n                    }) => {\n                      setTimeout(() => {\n                        let token = sessionStorage.Token;\n                        axios.post(`${Baseurl}withdraw`, values, {\n                          headers: {\n                            'Authorization': 'Bearer' + token\n                          }\n                        }).then(res => {\n                          setSubmitting(false);\n\n                          if (res.data) {\n                            if (res.data === 'noBankDetails') {\n                              toast(\"âœ‹ You have no bank details!\", {\n                                autoClose: 2000\n                              });\n                              setTimeout(() => history.push('/dashboard/settings'), 2000);\n                            } else if (res.data === 'wrongPin') {\n                              toast(\"âœ‹ Wrong PIN!\", {\n                                autoClose: 2000\n                              });\n                            } else if (res.data === 'insufficientFunds') {\n                              toast(\"âœ‹ Insufficient Funds!\", {\n                                autoClose: 2000\n                              });\n                            } else if (res.data === 'withdrawSuccesful') {\n                              toast(\"ðŸ‘ Fund has been automatically sent to your bank account!\", {\n                                autoClose: 2000\n                              });\n                            }\n                          }\n                        }).catch(error => {\n                          if (error.response.status === 500) {\n                            setSubmitting(false);\n                            sessionStorage.setItem('Path', path.pathname);\n                            history.push('/login');\n                          }\n                        });\n                      }, 400);\n                    },\n                    children: ({\n                      isSubmitting\n                    }) => /*#__PURE__*/_jsxDEV(Form, {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"row-1\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"row row-2\",\n                          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                            id: \"login-card-inner\",\n                            children: \"Amount\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 87,\n                            columnNumber: 81\n                          }, this), \" \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 87,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"row row-2\",\n                          children: [\" \", /*#__PURE__*/_jsxDEV(Field, {\n                            type: \"number\",\n                            placeholder: \"Enter Amount\",\n                            name: \"amount\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 88,\n                            columnNumber: 81\n                          }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                            name: \"amount\",\n                            component: \"small\",\n                            className: \"text-danger\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 89,\n                            columnNumber: 61\n                          }, this), \" \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 88,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 86,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"row-1\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"row row-2\",\n                          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                            id: \"login-card-inner\",\n                            children: \"Transaction Pin\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 94,\n                            columnNumber: 81\n                          }, this), \" \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 94,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"row row-2\",\n                          children: [\" \", /*#__PURE__*/_jsxDEV(Field, {\n                            type: \"number\",\n                            placeholder: \"4-digit Pin\",\n                            name: \"pin\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 95,\n                            columnNumber: 81\n                          }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                            name: \"pin\",\n                            component: \"small\",\n                            className: \"text-danger\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 96,\n                            columnNumber: 61\n                          }, this), \" \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 95,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 93,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        class: \"btn d-flex mx-auto mb-2\",\n                        type: \"submit\",\n                        disabled: isSubmitting,\n                        children: /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: [isSubmitting ? /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fas fa-spinner fa-spin\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 99,\n                            columnNumber: 150\n                          }, this) : '', \" Withdraw\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 99,\n                          columnNumber: 131\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 99,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 85,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 32,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 30,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 29,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 21,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 20,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Withdraw, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = Withdraw;\nexport default Withdraw;\n\nvar _c;\n\n$RefreshReg$(_c, \"Withdraw\");","map":{"version":3,"sources":["C:/xampp/htdocs/FROMHOME/frontend/src/components/dashboard/withdraw.js"],"names":["React","Formik","Form","Field","ErrorMessage","ToastContainer","toast","axios","Baseurl","Link","useHistory","useLocation","Withdraw","profile","history","marginTop","earnings","cursor","backgroundColor","amount","pin","values","errors","setSubmitting","setTimeout","token","sessionStorage","Token","post","headers","then","res","data","autoClose","push","catch","error","response","status","setItem","path","pathname","isSubmitting"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from 'axios';\r\nimport { Baseurl } from '../baseurl';\r\nimport { Link } from 'react-router-dom';\r\nimport { useHistory } from 'react-router';\r\nimport { useLocation } from 'react-router';\r\n\r\n\r\nconst Withdraw = ({ profile }) => {\r\n    const history = useHistory();\r\n    return (\r\n        <>\r\n            <div class=\"page-content page-container mx-auto mb-5\" id=\"page-content\" style={{ marginTop: '100px' }}>\r\n                <small><ToastContainer /></small>\r\n                <div class=\"row container d-flex justify-content-center mx-auto\">\r\n                    <div class=\"col-md\">\r\n                        <div class=\"profile-card user-card-full\">\r\n                            <div class=\"row m-l-0 m-r-0\">\r\n                                <div class=\"col-sm-4 bg-c-lite-green user-profile\">\r\n                                    <div class=\"card-block text-center text-white\">\r\n                                        <div class=\"m-b-25\"> <img src=\"https://img.icons8.com/bubbles/100/000000/user.png\" class=\"img-radius\" alt=\"User\" /> </div>\r\n                                        <h6><strong>{`Balance: â‚¦${profile.earnings ? profile.earnings : 0}`}</strong></h6>\r\n                                        <Link to='/dashboard/earnings-withdraw' class=\"badge p-2 text-light\" style={{ cursor: 'pointer', backgroundColor: '#294E51' }}>History</Link>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-sm-8\">\r\n                                    <div class=\"card-block\">\r\n                                        <h6 class=\"m-b-20 p-b-5 b-b-default f-w-600\">Earnings Withdrawal</h6>\r\n                                        <Formik\r\n                                            initialValues={{ amount: '', pin: '' }}\r\n                                            validate={values => {\r\n                                                const errors = {};\r\n                                                if (!values.amount) {\r\n                                                    errors.amount = '*Amount Required';\r\n                                                } else if (!values.pin) {\r\n                                                    errors.pin = '*Transaction Pin Required';\r\n                                                }\r\n\r\n                                                return errors;\r\n                                            }}\r\n                                            onSubmit={(values, { setSubmitting }) => {\r\n                                                setTimeout(() => {\r\n                                                    let token = sessionStorage.Token\r\n                                                    axios.post(`${Baseurl}withdraw`, values, {\r\n                                                        headers: {\r\n                                                            'Authorization': 'Bearer' + token\r\n                                                        }\r\n                                                    }).then((res) => {\r\n                                                        setSubmitting(false)\r\n                                                        if(res.data){\r\n                                                            if(res.data === 'noBankDetails'){\r\n                                                            toast(\"âœ‹ You have no bank details!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                }) \r\n                                                            setTimeout(()=>history.push('/dashboard/settings'), 2000)  \r\n                                                            }else if(res.data === 'wrongPin'){\r\n                                                                toast(\"âœ‹ Wrong PIN!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                }) \r\n                                                            }else if(res.data === 'insufficientFunds'){\r\n                                                                toast(\"âœ‹ Insufficient Funds!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                }) \r\n                                                            }else if(res.data === 'withdrawSuccesful'){\r\n                                                                toast(\"ðŸ‘ Fund has been automatically sent to your bank account!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                })\r\n                                                            }\r\n                                                        }\r\n                                                    }).catch((error)=>{\r\n                                                        if (error.response.status === 500) {\r\n                                                            setSubmitting(false)\r\n                                                            sessionStorage.setItem('Path', path.pathname)\r\n                                                            history.push('/login')\r\n                                                        }\r\n                                                    })\r\n                                                }, 400);\r\n                                            }}\r\n                                        >\r\n                                            {({ isSubmitting }) => (\r\n\r\n                                                <Form>\r\n                                                    <div class=\"row-1\">\r\n                                                        <div class=\"row row-2\"> <span id=\"login-card-inner\">Amount</span> </div>\r\n                                                        <div class=\"row row-2\"> <Field type=\"number\" placeholder=\"Enter Amount\" name=\"amount\" />\r\n                                                            <ErrorMessage name=\"amount\" component=\"small\" className='text-danger' /> </div>\r\n                                                    </div>\r\n\r\n\r\n                                                    <div class=\"row-1\">\r\n                                                        <div class=\"row row-2\"> <span id=\"login-card-inner\">Transaction Pin</span> </div>\r\n                                                        <div class=\"row row-2\"> <Field type=\"number\" placeholder=\"4-digit Pin\" name=\"pin\" />\r\n                                                            <ErrorMessage name=\"pin\" component=\"small\" className='text-danger' /> </div>\r\n\r\n                                                    </div>\r\n                                                    <button class=\"btn d-flex mx-auto mb-2\" type=\"submit\" disabled={isSubmitting}><b>{isSubmitting ? <i class=\"fas fa-spinner fa-spin\"></i> : ''} Withdraw</b></button>\r\n                                                </Form>\r\n                                            )}\r\n                                        </Formik>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Withdraw\r\n"]},"metadata":{},"sourceType":"module"}