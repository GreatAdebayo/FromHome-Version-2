{"ast":null,"code":"import React from'react';import{Formik,Form,Field,ErrorMessage}from'formik';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import axios from'axios';import{Baseurl}from'../baseurl';import{Link}from'react-router-dom';import{useHistory}from'react-router';import{useLocation}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Withdraw=function Withdraw(_ref){var profile=_ref.profile;var history=useHistory();var path=useLocation();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"page-content page-container mx-auto mb-5\",id:\"page-content\",style:{marginTop:'100px'},children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(ToastContainer,{})}),/*#__PURE__*/_jsx(\"div\",{class:\"row container d-flex justify-content-center mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-md\",children:/*#__PURE__*/_jsx(\"div\",{class:\"profile-card user-card-full\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row m-l-0 m-r-0\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-4 bg-c-lite-green user-profile\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card-block text-center text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"m-b-25\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/bubbles/100/000000/user.png\",class:\"img-radius\",alt:\"User\"}),\" \"]}),/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Balance: \\u20A6\".concat(profile.earnings?profile.earnings:0)})}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard/withdraw-history\",class:\"badge p-2 text-light\",style:{cursor:'pointer',backgroundColor:'#294E51'},children:\"History\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card-block\",children:[/*#__PURE__*/_jsx(\"h6\",{class:\"m-b-20 p-b-5 b-b-default f-w-600\",children:\"Earnings Withdrawal\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{amount:'',pin:''},validate:function validate(values){var errors={};if(!values.amount){errors.amount='*Amount Required';}else if(!values.pin){errors.pin='*Transaction Pin Required';}return errors;},onSubmit:function onSubmit(values,_ref2){var setSubmitting=_ref2.setSubmitting;setTimeout(function(){var token=sessionStorage.Token;axios.post(\"\".concat(Baseurl,\"withdraw\"),values,{headers:{'Authorization':'Bearer'+token}}).then(function(res){setSubmitting(false);if(res.data){if(res.data==='noBankDetails'){toast(\"âœ‹ You have no bank details!\",{autoClose:2000});setTimeout(function(){return history.push('/dashboard/settings');},2000);}else if(res.data==='wrongPin'){toast(\"âœ‹ Wrong PIN!\",{autoClose:2000});}else if(res.data==='insufficientFunds'){toast(\"âœ‹ Insufficient Funds!\",{autoClose:2000});}else if(res.data==='withdrawSuccesful'){toast(\"ðŸ‘ Fund has been automatically sent to your bank account!\",{autoClose:2000});}}}).catch(function(error){if(error.response.status===500){setSubmitting(false);sessionStorage.setItem('Path',path.pathname);history.push('/login');}});},400);},children:function children(_ref3){var isSubmitting=_ref3.isSubmitting;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Amount\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(Field,{type:\"number\",placeholder:\"Enter Amount\",name:\"amount\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"amount\",component:\"small\",className:\"text-danger\"}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Transaction Pin\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(Field,{type:\"number\",placeholder:\"4-digit Pin\",name:\"pin\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"pin\",component:\"small\",className:\"text-danger\"}),\" \"]})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn d-flex mx-auto mb-2\",type:\"submit\",disabled:isSubmitting,children:/*#__PURE__*/_jsxs(\"b\",{children:[isSubmitting?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):'',\" Withdraw\"]})})]});}})]})})]})})})})]})});};export default Withdraw;","map":{"version":3,"sources":["C:/xampp/htdocs/FROMHOME/frontend/src/components/dashboard/withdraw.js"],"names":["React","Formik","Form","Field","ErrorMessage","ToastContainer","toast","axios","Baseurl","Link","useHistory","useLocation","Withdraw","profile","history","path","marginTop","earnings","cursor","backgroundColor","amount","pin","values","errors","setSubmitting","setTimeout","token","sessionStorage","Token","post","headers","then","res","data","autoClose","push","catch","error","response","status","setItem","pathname","isSubmitting"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from 'axios';\r\nimport { Baseurl } from '../baseurl';\r\nimport { Link } from 'react-router-dom';\r\nimport { useHistory } from 'react-router';\r\nimport { useLocation } from 'react-router';\r\n\r\n\r\nconst Withdraw = ({ profile }) => {\r\n    const history = useHistory();\r\n    const path = useLocation();\r\n    return (\r\n        <>\r\n            <div class=\"page-content page-container mx-auto mb-5\" id=\"page-content\" style={{ marginTop: '100px' }}>\r\n                <small><ToastContainer /></small>\r\n                <div class=\"row container d-flex justify-content-center mx-auto\">\r\n                    <div class=\"col-md\">\r\n                        <div class=\"profile-card user-card-full\">\r\n                            <div class=\"row m-l-0 m-r-0\">\r\n                                <div class=\"col-sm-4 bg-c-lite-green user-profile\">\r\n                                    <div class=\"card-block text-center text-white\">\r\n                                        <div class=\"m-b-25\"> <img src=\"https://img.icons8.com/bubbles/100/000000/user.png\" class=\"img-radius\" alt=\"User\" /> </div>\r\n                                        <h6><strong>{`Balance: â‚¦${profile.earnings ? profile.earnings : 0}`}</strong></h6>\r\n                                        <Link to='/dashboard/withdraw-history' class=\"badge p-2 text-light\" style={{ cursor: 'pointer', backgroundColor: '#294E51' }}>History</Link>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-sm-8\">\r\n                                    <div class=\"card-block\">\r\n                                        <h6 class=\"m-b-20 p-b-5 b-b-default f-w-600\">Earnings Withdrawal</h6>\r\n                                        <Formik\r\n                                            initialValues={{ amount: '', pin: '' }}\r\n                                            validate={values => {\r\n                                                const errors = {};\r\n                                                if (!values.amount) {\r\n                                                    errors.amount = '*Amount Required';\r\n                                                } else if (!values.pin) {\r\n                                                    errors.pin = '*Transaction Pin Required';\r\n                                                }\r\n\r\n                                                return errors;\r\n                                            }}\r\n                                            onSubmit={(values, { setSubmitting }) => {\r\n                                                setTimeout(() => {\r\n                                                    let token = sessionStorage.Token\r\n                                                    axios.post(`${Baseurl}withdraw`, values, {\r\n                                                        headers: {\r\n                                                            'Authorization': 'Bearer' + token\r\n                                                        }\r\n                                                    }).then((res) => {\r\n                                                        setSubmitting(false)\r\n                                                        if(res.data){\r\n                                                            if(res.data === 'noBankDetails'){\r\n                                                            toast(\"âœ‹ You have no bank details!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                }) \r\n                                                            setTimeout(()=>history.push('/dashboard/settings'), 2000)  \r\n                                                            }else if(res.data === 'wrongPin'){\r\n                                                                toast(\"âœ‹ Wrong PIN!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                }) \r\n                                                            }else if(res.data === 'insufficientFunds'){\r\n                                                                toast(\"âœ‹ Insufficient Funds!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                }) \r\n                                                            }else if(res.data === 'withdrawSuccesful'){\r\n                                                                toast(\"ðŸ‘ Fund has been automatically sent to your bank account!\", {\r\n                                                                    autoClose: 2000,\r\n                                                                })\r\n                                                            }\r\n                                                        }\r\n                                                    }).catch((error)=>{\r\n                                                        if (error.response.status === 500) {\r\n                                                            setSubmitting(false)\r\n                                                            sessionStorage.setItem('Path', path.pathname)\r\n                                                            history.push('/login')\r\n                                                        }\r\n                                                    })\r\n                                                }, 400);\r\n                                            }}\r\n                                        >\r\n                                            {({ isSubmitting }) => (\r\n\r\n                                                <Form>\r\n                                                    <div class=\"row-1\">\r\n                                                        <div class=\"row row-2\"> <span id=\"login-card-inner\">Amount</span> </div>\r\n                                                        <div class=\"row row-2\"> <Field type=\"number\" placeholder=\"Enter Amount\" name=\"amount\" />\r\n                                                            <ErrorMessage name=\"amount\" component=\"small\" className='text-danger' /> </div>\r\n                                                    </div>\r\n\r\n\r\n                                                    <div class=\"row-1\">\r\n                                                        <div class=\"row row-2\"> <span id=\"login-card-inner\">Transaction Pin</span> </div>\r\n                                                        <div class=\"row row-2\"> <Field type=\"number\" placeholder=\"4-digit Pin\" name=\"pin\" />\r\n                                                            <ErrorMessage name=\"pin\" component=\"small\" className='text-danger' /> </div>\r\n\r\n                                                    </div>\r\n                                                    <button class=\"btn d-flex mx-auto mb-2\" type=\"submit\" disabled={isSubmitting}><b>{isSubmitting ? <i class=\"fas fa-spinner fa-spin\"></i> : ''} Withdraw</b></button>\r\n                                                </Form>\r\n                                            )}\r\n                                        </Formik>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Withdraw\r\n"]},"metadata":{},"sourceType":"module"}