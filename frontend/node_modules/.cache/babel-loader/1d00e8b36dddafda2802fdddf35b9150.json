{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\FROMHOME\\\\frontend\\\\src\\\\components\\\\landing_page\\\\cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport BackTotop from './back_to_top';\nimport Footer from './footer';\nimport Navbar from './navbar';\nimport TrendingCourses from './trending_courses';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useHistory } from 'react-router';\nimport { useLocation } from 'react-router';\nimport axios from 'axios';\nimport { Baseurl } from '../baseurl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Cart = () => {\n  _s();\n\n  const history = useHistory();\n  const path = useLocation();\n  const [cart, setCart] = useState([]);\n  const [show, setSHow] = useState(false);\n  useEffect(() => {\n    let cart = JSON.parse(localStorage.getItem('cart'));\n\n    if (cart) {\n      setCart(cart);\n    }\n  }, []);\n\n  const deleteItem = index => {\n    const newCart = [...cart];\n    newCart.splice(index, 1);\n    setCart(newCart);\n    let localStorageCart = JSON.parse(localStorage.getItem('cart'));\n    localStorageCart = newCart;\n    localStorage.setItem('cart', JSON.stringify(localStorageCart));\n  }; // const decrease = (index) => {\n  //     const newCart = [...cart]\n  //     for (let i = 0; i < newCart.length; i++) {\n  //         if (index === i) {\n  //             if (newCart[i].qty > 1) {\n  //                 newCart[i].qty--\n  //                 let newQty = newCart[i].qty\n  //                 newCart[i].newCost = newCart[i].cost * newQty\n  //                 setCart(newCart)\n  //                 let localStorageCart = JSON.parse(localStorage.getItem('cart'))\n  //                 localStorageCart = newCart\n  //                 localStorage.setItem('cart', JSON.stringify(localStorageCart))\n  //             }\n  //         }\n  //     }\n  // }\n  // const increase = (index) => {\n  //     const newCart = [...cart]\n  //     for (let i = 0; i < newCart.length; i++) {\n  //         if (index === i) {\n  //             newCart[i].qty++;\n  //             let newQty = newCart[i].qty\n  //             newCart[i].newCost = newCart[i].cost * newQty\n  //             setCart(newCart)\n  //             let localStorageCart = JSON.parse(localStorage.getItem('cart'))\n  //             localStorageCart = newCart\n  //             localStorage.setItem('cart', JSON.stringify(localStorageCart))\n  //         }\n  //     }\n  // }\n\n\n  const preparePayment = () => {\n    setSHow(true);\n    let token = sessionStorage.Token;\n\n    if (token) {\n      let cart = JSON.parse(localStorage.getItem('cart'));\n      axios.post(`${Baseurl}preparepayment`, {\n        cart: cart\n      }, {\n        headers: {\n          'Authorization': 'Bearer' + token\n        }\n      }).then(res => {\n        setSHow(false);\n\n        if (res.data.alreadyPurchased) {\n          toast(\"ðŸ˜” One or more course in cart already purchased!\", {\n            autoClose: 2000\n          });\n        } else if (res.data.payment) {\n          history.push(`/payment/${res.data.payment}`);\n        } else if (res.data.notVerified) {\n          toast(\"ðŸ˜” Verify your account to make a purchase!\", {\n            autoClose: 2000\n          });\n          setTimeout(() => history.push(''));\n        }\n      }).catch(error => {\n        if (error.response.status === 500) {\n          setSHow(false);\n          sessionStorage.setItem('Path', path.pathname);\n          history.push('/login');\n        }\n      });\n    } else {\n      setSHow(false);\n      history.push('/login');\n      sessionStorage.setItem('Path', path.pathname);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"about container-fluid mt-3\",\n      id: \"about\",\n      children: [/*#__PURE__*/_jsxDEV(\"small\", {\n        children: /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 24\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), cart.length ? '' : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-sm mx-auto text-center mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Your Cart is empty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fad fa-shopping-cart fa-3x text-danger\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn d-flex mx-auto\",\n            onClick: () => history.push('/available-courses'),\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: /*#__PURE__*/_jsxDEV(\"small\", {\n                children: \"Keep shopping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 114\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 111\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"d-flex justify-content-center row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-8 col-sm mx-auto\",\n            children: [cart.length ? /*#__PURE__*/_jsxDEV(\"small\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fad fa-shopping-cart\",\n                  style: {\n                    color: '#071B4D'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 59\n                }, this), \" Your Shopping Cart\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 51\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 44\n            }, this) : '', cart.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"d-flex flex-row justify-content-between align-items-center p-2  mt-4 px-3\",\n                  style: {\n                    backgroundColor: '#F6F7F6',\n                    borderRadius: '8px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"mr-1\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.category === 'IT and Software' ? 'https://img.icons8.com/external-flatart-icons-flat-flatarticons/64/000000/external-software-hacking-flatart-icons-flat-flatarticons.png' : item.category === 'Design' ? 'https://img.icons8.com/external-kiranshastry-flat-kiranshastry/64/000000/external-design-industry-kiranshastry-flat-kiranshastry.png' : item.category === 'Agriculture' ? 'https://img.icons8.com/external-wanicon-flat-wanicon/64/000000/external-agriculture-university-courses-wanicon-flat-wanicon.png' : item.category === 'Marketing' ? \"https://img.icons8.com/external-itim2101-flat-itim2101/64/000000/external-marketing-business-strategy-itim2101-flat-itim2101.png\" : item.category === 'Photography' ? \"https://img.icons8.com/external-wanicon-flat-wanicon/64/000000/external-photography-art-and-design-wanicon-flat-wanicon.png\" : item.category === 'Engineering' ? \"https://img.icons8.com/external-wanicon-flat-wanicon/64/000000/external-engineering-university-courses-wanicon-flat-wanicon.png\" : item.category === 'Cryptocurrency' ? \"https://img.icons8.com/external-itim2101-flat-itim2101/64/000000/external-cryptocurrency-mobile-payment-itim2101-flat-itim2101.png\" : '',\n                      alt: \"\",\n                      style: {\n                        width: '50%'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"d-flex flex-column align-items-center product-details\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      class: \"font-weight-bold\",\n                      children: item.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 112\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"d-flex flex-row product-desc\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"color\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          class: \"text-grey\",\n                          children: \"Tutor:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 142,\n                          columnNumber: 72\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          class: \"font-weight-bold\",\n                          children: [\"\\xA0\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: item.tutor\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 142,\n                            columnNumber: 146\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 142,\n                          columnNumber: 109\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 142,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: item.cost === 0 ? 'Free' : `â‚¦${item.cost}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"d-flex align-items-center\",\n                    onClick: () => deleteItem(index),\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fa fa-trash mb-1 text-danger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 118\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false);\n            }).reverse(), cart.length ? /*#__PURE__*/_jsxDEV(\"button\", {\n              to: \"payment\",\n              class: \"btn d-flex mx-auto\",\n              type: \"button\",\n              onClick: preparePayment,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [show ? /*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fas fa-spinner fa-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 145\n                }, this) : '', \" Proceed to pay \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"\\u20A6\", cart.reduce(function (total, obj) {\n                    return total + obj.cost;\n                  }, 0)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 205\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 131\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 44\n            }, this) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TrendingCourses, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(BackTotop, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Cart, \"TwOzUjRA8LlWJ4SDkVhYpo7fsDQ=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/xampp/htdocs/FROMHOME/frontend/src/components/landing_page/cart.js"],"names":["React","useEffect","useState","Link","BackTotop","Footer","Navbar","TrendingCourses","ToastContainer","toast","useHistory","useLocation","axios","Baseurl","Cart","history","path","cart","setCart","show","setSHow","JSON","parse","localStorage","getItem","deleteItem","index","newCart","splice","localStorageCart","setItem","stringify","preparePayment","token","sessionStorage","Token","post","headers","then","res","data","alreadyPurchased","autoClose","payment","push","notVerified","setTimeout","catch","error","response","status","pathname","length","color","map","item","backgroundColor","borderRadius","category","width","title","tutor","cost","reverse","reduce","total","obj"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport BackTotop from './back_to_top'\r\nimport Footer from './footer'\r\nimport Navbar from './navbar'\r\nimport TrendingCourses from './trending_courses'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useHistory } from 'react-router'\r\nimport { useLocation } from 'react-router'\r\nimport axios from 'axios'\r\nimport { Baseurl } from '../baseurl'\r\n\r\nconst Cart = () => {\r\n    const history = useHistory();\r\n    const path = useLocation()\r\n    const [cart, setCart] = useState([])\r\n    const [show, setSHow] = useState(false)\r\n    useEffect(() => {\r\n        let cart = JSON.parse(localStorage.getItem('cart'))\r\n        if (cart) {\r\n            setCart(cart)\r\n        }\r\n    }, [])\r\n\r\n    const deleteItem = (index) => {\r\n        const newCart = [...cart]\r\n        newCart.splice(index, 1);\r\n        setCart(newCart)\r\n        let localStorageCart = JSON.parse(localStorage.getItem('cart'))\r\n        localStorageCart = newCart\r\n        localStorage.setItem('cart', JSON.stringify(localStorageCart))\r\n    }\r\n\r\n\r\n    // const decrease = (index) => {\r\n    //     const newCart = [...cart]\r\n    //     for (let i = 0; i < newCart.length; i++) {\r\n    //         if (index === i) {\r\n    //             if (newCart[i].qty > 1) {\r\n    //                 newCart[i].qty--\r\n    //                 let newQty = newCart[i].qty\r\n    //                 newCart[i].newCost = newCart[i].cost * newQty\r\n    //                 setCart(newCart)\r\n    //                 let localStorageCart = JSON.parse(localStorage.getItem('cart'))\r\n    //                 localStorageCart = newCart\r\n    //                 localStorage.setItem('cart', JSON.stringify(localStorageCart))\r\n    //             }\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    // const increase = (index) => {\r\n    //     const newCart = [...cart]\r\n    //     for (let i = 0; i < newCart.length; i++) {\r\n    //         if (index === i) {\r\n    //             newCart[i].qty++;\r\n    //             let newQty = newCart[i].qty\r\n    //             newCart[i].newCost = newCart[i].cost * newQty\r\n    //             setCart(newCart)\r\n    //             let localStorageCart = JSON.parse(localStorage.getItem('cart'))\r\n    //             localStorageCart = newCart\r\n    //             localStorage.setItem('cart', JSON.stringify(localStorageCart))\r\n    //         }\r\n    //     }\r\n\r\n\r\n    // }\r\n\r\n    const preparePayment = () => {\r\n        setSHow(true)\r\n        let token = sessionStorage.Token\r\n        if (token) {\r\n            let cart = JSON.parse(localStorage.getItem('cart'))\r\n            axios.post(`${Baseurl}preparepayment`, { cart: cart }, {\r\n                headers: {\r\n                    'Authorization': 'Bearer' + token\r\n                }\r\n            }).then((res) => {\r\n                setSHow(false)\r\n                if (res.data.alreadyPurchased) {\r\n                    toast(\"ðŸ˜” One or more course in cart already purchased!\", {\r\n                        autoClose: 2000,\r\n                    })\r\n                } else if (res.data.payment) {\r\n                    history.push(`/payment/${res.data.payment}`)\r\n\r\n                } else if (res.data.notVerified) {\r\n                    toast(\"ðŸ˜” Verify your account to make a purchase!\", {\r\n                        autoClose: 2000,\r\n                    })\r\n                    setTimeout(()=>history.push('')\r\n                    )\r\n                }\r\n            }).catch((error) => {\r\n                if (error.response.status === 500) {\r\n                    setSHow(false)\r\n                    sessionStorage.setItem('Path', path.pathname)\r\n                    history.push('/login')\r\n                }\r\n            })\r\n        } else {\r\n            setSHow(false)\r\n            history.push('/login')\r\n            sessionStorage.setItem('Path', path.pathname)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <section className=\"about container-fluid mt-3\" id=\"about\">\r\n                <small><ToastContainer /></small>\r\n                {cart.length ? '' : <div className='row'>\r\n                    <div className='col-md-6 col-sm mx-auto text-center mt-4'>\r\n                        <h5>Your Cart is empty</h5>\r\n                        <i class=\"fad fa-shopping-cart fa-3x text-danger\"></i>\r\n                        <button class=\"btn d-flex mx-auto\" onClick={() => history.push('/available-courses')}><b><small>Keep shopping</small></b></button>\r\n                    </div>\r\n                </div>}\r\n                <div class=\"container mt-2\">\r\n                    <div class=\"d-flex justify-content-center row\">\r\n                        <div class=\"col-md-8 col-sm mx-auto\">\r\n                            {cart.length ? <small><strong><i class=\"fad fa-shopping-cart\" style={{ color: '#071B4D' }}></i> Your Shopping Cart</strong></small> : ''}\r\n                            {cart.map((item, index) => {\r\n                                return (\r\n                                    <>\r\n                                        <div class=\"d-flex flex-row justify-content-between align-items-center p-2  mt-4 px-3\" style={{ backgroundColor: '#F6F7F6', borderRadius: '8px' }}>\r\n                                            <div class=\"mr-1\">\r\n                                                <img src={item.category === 'IT and Software' ? 'https://img.icons8.com/external-flatart-icons-flat-flatarticons/64/000000/external-software-hacking-flatart-icons-flat-flatarticons.png' :\r\n                                                    item.category === 'Design' ? 'https://img.icons8.com/external-kiranshastry-flat-kiranshastry/64/000000/external-design-industry-kiranshastry-flat-kiranshastry.png' :\r\n                                                        item.category === 'Agriculture' ? 'https://img.icons8.com/external-wanicon-flat-wanicon/64/000000/external-agriculture-university-courses-wanicon-flat-wanicon.png' :\r\n                                                            item.category === 'Marketing' ? \"https://img.icons8.com/external-itim2101-flat-itim2101/64/000000/external-marketing-business-strategy-itim2101-flat-itim2101.png\" :\r\n                                                                item.category === 'Photography' ? \"https://img.icons8.com/external-wanicon-flat-wanicon/64/000000/external-photography-art-and-design-wanicon-flat-wanicon.png\" :\r\n                                                                    item.category === 'Engineering' ? \"https://img.icons8.com/external-wanicon-flat-wanicon/64/000000/external-engineering-university-courses-wanicon-flat-wanicon.png\" :\r\n                                                                        item.category === 'Cryptocurrency' ? \"https://img.icons8.com/external-itim2101-flat-itim2101/64/000000/external-cryptocurrency-mobile-payment-itim2101-flat-itim2101.png\" : ''} alt='' style={{ width: '50%' }} />\r\n\r\n                                            </div>\r\n                                            <div class=\"d-flex flex-column align-items-center product-details\"><small class=\"font-weight-bold\">{item.title}</small>\r\n                                                <div class=\"d-flex flex-row product-desc\">\r\n                                                    <div class=\"color\"><span class=\"text-grey\">Tutor:</span><span class=\"font-weight-bold\">&nbsp;<strong>{item.tutor}</strong></span></div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <p>{item.cost === 0 ? 'Free' : `â‚¦${item.cost}`}</p>\r\n                                            </div>\r\n                                            <div class=\"d-flex align-items-center\" onClick={() => deleteItem(index)}><i class=\"fa fa-trash mb-1 text-danger\"></i></div>\r\n                                        </div>\r\n                                    </>\r\n                                )\r\n                            }).reverse()}\r\n                            {cart.length ? <button to='payment' class=\"btn d-flex mx-auto\" type=\"button\" onClick={preparePayment}><span>{show ? <i class=\"fas fa-spinner fa-spin\"></i> : ''} Proceed to pay <strong>â‚¦{cart.reduce(function (total, obj) { return total + obj.cost }, 0)}</strong></span></button> : ''}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            <TrendingCourses />\r\n            <BackTotop />\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Cart\r\n"]},"metadata":{},"sourceType":"module"}