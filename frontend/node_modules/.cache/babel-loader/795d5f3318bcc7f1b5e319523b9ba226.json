{"ast":null,"code":"import _slicedToArray from\"C:/xampp/htdocs/FROMHOME/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useEffect,useState}from'react';import{Baseurl}from'../../../baseurl';import{useLocation}from'react-router';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Formik,Form,Field,ErrorMessage}from'formik';import Skeleton from'react-loading-skeleton';import{Link}from'react-router-dom';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CourseFiles=function CourseFiles(){document.title='Fromhome | Course Files';var history=useHistory();var path=useLocation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),section=_useState2[0],setSection=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),File=_useState4[0],setFiles=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showloader=_useState6[0],setShowloader=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),publish=_useState8[0],setPublish=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showFileError=_useState10[0],setFileError=_useState10[1];useEffect(function(){localStorage.removeItem('course');if(localStorage.code){if(sessionStorage.Token){axios.get(\"\".concat(Baseurl,\"getsections\"),{params:{code:localStorage.code,token:sessionStorage.Token}}).then(function(res){if(res.data==='noCourseFound'){localStorage.removeItem('code');toast(\"‚úã Course not found\",{autoClose:2000});setTimeout(function(){return history.goBack();},2000);}else{setSection(res.data);}}).catch(function(error){if(error){if(error.response.status===500){sessionStorage.setItem('Path',path.pathname);history.push('/login');}}});}else{history.push('/login');sessionStorage.setItem('Path',path.pathname);}}else{history.push('/dashboard/created-courses');}},[]);var handleFile=function handleFile(e){setFiles(e.target.files[0]);setFileError(false);};var publishCourse=function publishCourse(e){setPublish(true);e.preventDefault();var token=sessionStorage.Token;var code=localStorage.code;if(token&&code){axios.post(\"\".concat(Baseurl,\"publishcourse\"),{token:token,code:code}).then(function(res){setPublish(false);if(res.data==='videoIncomplete'){toast(\"‚úã One or more section has no video!\",{autoClose:2000});setTimeout(function(){return history.push('/dashboard/create-a-course/videos');},2000);}else if(res.data==='published'){toast(\"üëç Course Succefully Published\",{autoClose:2000});setTimeout(function(){return history.push('/dashboard/created-courses');},2000);localStorage.removeItem('code');}else if(res.data==='alreadypublished'){toast(\"üëç Course Succefully Published\",{autoClose:2000});setTimeout(function(){return history.push('/dashboard/created-courses');},2000);localStorage.removeItem('code');}else if(res.data==='notverified'){toast(\"‚úã Verify account to publish\",{autoClose:2000});}});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"about container-fluid mt-3\",id:\"about\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(ToastContainer,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-9 col-sm mx-auto\",\"data-aos\":\"fade-in\",\"data-aos-delay\":\"100\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"login-card\",style:{borderRadius:'10px'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"assets/img/logo.png\",alt:\"\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD17\",/*#__PURE__*/_jsx(\"strong\",{children:\"Stage 3:\"}),\" Section File\"]}),/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"*File attachment is not compulsory\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"*Supported formats (pdf,  zip, txt) \",/*#__PURE__*/_jsx(\"br\",{}),\"*Size should be 40MB or less.\"]})}),section.length?/*#__PURE__*/_jsxs(\"div\",{class:\"row-1 mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsxs(\"span\",{id:\"login-card-inner\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-info-circle\",style:{color:'#0D826E'}}),\" All Sections (\",section.length,\")\"]}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:section.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-sm-5 mx-auto py-2 text-center\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Section \",index+1]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 py-1 text-light section-loop\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"pt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-capitalize\",children:[item.no_of_files<1?/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-info-circle text-danger\"}):/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-badge-check text-info\"}),\" \",item.section_name,\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"No of File:\",/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",item.no_of_files]})]})]})})]},index);})})]}):/*#__PURE__*/_jsx(\"div\",{class:\"row-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-5 mx-auto py-2 text-center\",children:/*#__PURE__*/_jsx(Skeleton,{count:1})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-5 mx-auto py-2 text-center\",children:/*#__PURE__*/_jsx(Skeleton,{count:1})})]})}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Section File\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control form-control-sm mt-2\",id:\"formFileSm\",type:\"File\",onChange:handleFile}),showFileError?/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:\"*Please choose a File\"}):'']})]})}),/*#__PURE__*/_jsx(Formik,{initialValues:{section:'',courseCode:'',token:''},validate:function validate(values){var errors={};if(!values.section){errors.section='*Please choose a section for this File';}return errors;},onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;if(File){setFileError(false);setShowloader(true);var token=sessionStorage.Token;if(token){var formData=new FormData();formData.append('File',File);formData.append('token',token);formData.append('section',values.section);axios.post(\"\".concat(Baseurl,\"uploadfiles\"),formData).then(function(res){setShowloader(false);if(res.data==='added'){history.push('/dashboard/create-a-course/sections');history.goBack();setTimeout(function(){return toast(\"üëç File added!\",{autoClose:2000});},500);}else if(res.data==='fileFormatNotSUpported'){toast(\"‚úã File format not supported!\",{autoClose:2000});}else if(res.data==='nofile'){toast(\"‚úã No File!\",{autoClose:2000});}}).catch(function(error){setShowloader(false);if(error.response.status===500){sessionStorage.setItem('Path',path.pathname);history.push('/login');}else if(error.response.status===413){toast(\"‚úã File too large!\",{autoClose:2000});}});}else{history.push('/dashboard/created-courses');}}else{setFileError(true);}},children:function children(_ref2){var isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Attach File to\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[/*#__PURE__*/_jsxs(Field,{as:\"select\",name:\"section\",class:\"form-select form-select-sm mt-1\",\"aria-label\":\".form-select-sm example\",children:[/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"This File belongs to?\"}),section.map(function(item,index){return/*#__PURE__*/_jsxs(\"option\",{className:\"text-capitalize\",value:item.id,children:[\"File(\",item.no_of_files,\") \",item.section_name]},index);})]}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"section\",component:\"small\",className:\"text-danger\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"border-0 bg-transparent outline-0\",style:{color:'#0D826E',cursor:'pointer'},type:\"submit\",children:[\" \",showloader?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\",style:{color:'#071B4D'}}):/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-plus-square\",style:{color:'#071B4D'}}),\" \",/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Click to Add File\"})})]})]});}}),/*#__PURE__*/_jsx(\"button\",{class:\"btn d-flex mx-auto mb-2\",onClick:publishCourse,children:/*#__PURE__*/_jsxs(\"b\",{children:[\" \",publish?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):'',/*#__PURE__*/_jsx(\"small\",{children:\" Skip and Publish\"})]})}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard/create-a-course/videos\",style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"strong\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-long-arrow-left\",style:{color:'#0D826E'}}),\" Edit Previous Stage \"]})})})]})})})]})});};export default CourseFiles;","map":{"version":3,"sources":["C:/xampp/htdocs/FROMHOME/frontend/src/components/dashboard/tutor/create_course/course_files.js"],"names":["axios","React","useEffect","useState","Baseurl","useLocation","ToastContainer","toast","Formik","Form","Field","ErrorMessage","Skeleton","Link","useHistory","CourseFiles","document","title","history","path","section","setSection","File","setFiles","showloader","setShowloader","publish","setPublish","showFileError","setFileError","localStorage","removeItem","code","sessionStorage","Token","get","params","token","then","res","data","autoClose","setTimeout","goBack","catch","error","response","status","setItem","pathname","push","handleFile","e","target","files","publishCourse","preventDefault","post","borderRadius","length","color","map","item","index","no_of_files","section_name","courseCode","values","errors","setSubmitting","formData","FormData","append","isSubmitting","id","cursor"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Baseurl } from '../../../baseurl';\r\nimport { useLocation } from 'react-router';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport { Link } from 'react-router-dom';\r\nimport { useHistory } from 'react-router';\r\n\r\n\r\nconst CourseFiles = () => {\r\n    document.title = 'Fromhome | Course Files'\r\n    const history = useHistory()\r\n    const path = useLocation();\r\n    const [section, setSection] = useState([])\r\n    const [File, setFiles] = useState('')\r\n    const [showloader, setShowloader] = useState(false)\r\n    const [publish, setPublish] = useState(false)\r\n    const [showFileError, setFileError] = useState(false)\r\n\r\n    useEffect(() => {\r\n        localStorage.removeItem('course')\r\n        if (localStorage.code) {\r\n            if (sessionStorage.Token) {\r\n                axios.get(`${Baseurl}getsections`, {\r\n                    params: {\r\n                        code: localStorage.code,\r\n                        token: sessionStorage.Token\r\n                    }\r\n                }).then((res) => {\r\n\r\n                    if (res.data === 'noCourseFound') {\r\n                        localStorage.removeItem('code')\r\n                        toast(\"‚úã Course not found\", {\r\n                            autoClose: 2000,\r\n                        })\r\n                        setTimeout(() => history.goBack(), 2000)\r\n\r\n                    } else {\r\n                        setSection(res.data)\r\n                    }\r\n                }).catch((error) => {\r\n                    if (error) {\r\n                        if (error.response.status === 500) {\r\n                            sessionStorage.setItem('Path', path.pathname)\r\n                            history.push('/login')\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                history.push('/login')\r\n                sessionStorage.setItem('Path', path.pathname)\r\n            }\r\n        } else {\r\n            history.push('/dashboard/created-courses');\r\n        }\r\n\r\n    }, [])\r\n\r\n    const handleFile = (e) => {\r\n        setFiles(e.target.files[0])\r\n        setFileError(false)\r\n\r\n    }\r\n\r\n\r\n\r\n    const publishCourse = (e) => {\r\n        setPublish(true)\r\n        e.preventDefault();\r\n        let token = sessionStorage.Token\r\n        let code = localStorage.code\r\n        if (token && code) {\r\n            axios.post(`${Baseurl}publishcourse`, { token: token, code: code }).then((res) => {\r\n                setPublish(false)\r\n\r\n                if (res.data === 'videoIncomplete') {\r\n                    toast(\"‚úã One or more section has no video!\", {\r\n                        autoClose: 2000,\r\n                    })\r\n                    setTimeout(() => history.push('/dashboard/create-a-course/videos'), 2000)\r\n                } else if (res.data === 'published') {\r\n                    toast(\"üëç Course Succefully Published\", {\r\n                        autoClose: 2000,\r\n                    })\r\n                    setTimeout(() => history.push('/dashboard/created-courses'), 2000)\r\n                    localStorage.removeItem('code')\r\n                } else if (res.data === 'alreadypublished') {\r\n                    toast(\"üëç Course Succefully Published\", {\r\n                        autoClose: 2000,\r\n                    })\r\n                    setTimeout(() => history.push('/dashboard/created-courses'), 2000)\r\n                    localStorage.removeItem('code')\r\n                } else if (res.data === 'notverified') {\r\n                    toast(\"‚úã Verify account to publish\", {\r\n                        autoClose: 2000,\r\n                    })\r\n                }\r\n\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <section className=\"about container-fluid mt-3\" id=\"about\">\r\n                <small><ToastContainer /></small>\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-9 col-sm mx-auto\" data-aos=\"fade-in\" data-aos-delay=\"100\">\r\n                        <div class=\"login-card\" style={{ borderRadius: '10px' }}>\r\n                            <img src=\"assets/img/logo.png\" alt=\"\" /> <br />\r\n                            <p>üîó<strong>Stage 3:</strong> Section File</p>\r\n                            <small><strong>*File attachment is not compulsory</strong></small><br />\r\n                            <small className='text-danger'><strong>*Supported formats (pdf,  zip, txt) <br />*Size should be 40MB or less.</strong></small>\r\n\r\n                            {section.length ? <div class=\"row-1 mt-3\">\r\n                                <div class=\"row row-2\"> <span id=\"login-card-inner\"><i class=\"fad fa-info-circle\" style={{ color: '#0D826E' }}></i> All Sections ({section.length})</span> </div>\r\n                                <div className='row'>\r\n\r\n                                    {section.map((item, index) => {\r\n                                        return (\r\n\r\n                                            <div className='col-md-6 col-sm-5 mx-auto py-2 text-center' key={index}>\r\n                                                <small><strong>Section {index + 1}</strong></small>\r\n                                                <div className='mb-2 py-1 text-light section-loop'>\r\n                                                    <small className='pt-2'><span className='text-capitalize'>{item.no_of_files < 1 ? <i class=\"fad fa-info-circle text-danger\"></i> : <i class=\"fas fa-badge-check text-info\"></i>} {item.section_name} </span><br />\r\n                                                        <small>No of File:<strong> {item.no_of_files}</strong></small></small>\r\n                                                </div>\r\n                                            </div>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n\r\n                            </div> : <div class=\"row-1\">\r\n                                <div className='row'>\r\n                                    <div className='col-md-6 col-sm-5 mx-auto py-2 text-center'>\r\n                                        <Skeleton count={1} />\r\n                                    </div>\r\n                                    <div className='col-md-6 col-sm-5 mx-auto py-2 text-center'>\r\n                                        <Skeleton count={1} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            }\r\n\r\n\r\n                            <form>\r\n\r\n                                <div class=\"row-1\">\r\n                                    <div class=\"row row-2\"> <span id=\"login-card-inner\">Section File</span> </div>\r\n                                    <div class=\"row row-2\">\r\n                                        <input class=\"form-control form-control-sm mt-2\" id=\"formFileSm\" type=\"File\"\r\n                                            onChange={handleFile} />\r\n                                        {showFileError ? <small className='text-danger'>*Please choose a File</small> : ''}\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </form>\r\n\r\n                            <Formik\r\n                                initialValues={{ section: '', courseCode: '', token: '' }}\r\n                                validate={values => {\r\n                                    const errors = {};\r\n\r\n                                    if (!values.section) {\r\n                                        errors.section = '*Please choose a section for this File';\r\n                                    }\r\n                                    return errors;\r\n                                }}\r\n                                onSubmit={(values, { setSubmitting }) => {\r\n                                    if (File) {\r\n                                        setFileError(false)\r\n                                        setShowloader(true)\r\n                                        let token = sessionStorage.Token\r\n                                        if (token) {\r\n                                            let formData = new FormData();\r\n                                            formData.append('File', File)\r\n                                            formData.append('token', token)\r\n                                            formData.append('section', values.section)\r\n\r\n                                            axios.post(`${Baseurl}uploadfiles`, formData).then((res) => {\r\n                                                setShowloader(false)\r\n                                                if (res.data === 'added') {\r\n                                                    history.push('/dashboard/create-a-course/sections')\r\n                                                    history.goBack()\r\n                                                    setTimeout(() => toast(\"üëç File added!\", {\r\n                                                        autoClose: 2000,\r\n                                                    }), 500)\r\n                                                } else if (res.data === 'fileFormatNotSUpported') {\r\n                                                    toast(\"‚úã File format not supported!\", {\r\n                                                        autoClose: 2000,\r\n                                                    })\r\n                                                } else if (res.data === 'nofile') {\r\n                                                    toast(\"‚úã No File!\", {\r\n                                                        autoClose: 2000,\r\n                                                    })\r\n                                                }\r\n                                            }).catch((error) => {\r\n                                                setShowloader(false)\r\n                                                if (error.response.status === 500) {\r\n                                                    sessionStorage.setItem('Path', path.pathname)\r\n                                                    history.push('/login')\r\n                                                } else if (error.response.status === 413) {\r\n                                                    toast(\"‚úã File too large!\", {\r\n                                                        autoClose: 2000,\r\n                                                    })\r\n                                                }\r\n                                            })\r\n                                        } else {\r\n                                            history.push('/dashboard/created-courses');\r\n                                        }\r\n                                    } else {\r\n                                        setFileError(true)\r\n                                    }\r\n\r\n\r\n                                }}\r\n                            >\r\n                                {({ isSubmitting }) => (\r\n                                    <Form>\r\n\r\n                                        <div class=\"row-1\">\r\n                                            <div class=\"row row-2\"> <span id=\"login-card-inner\">Attach File to</span>\r\n                                            </div>\r\n\r\n                                            <div class=\"row row-2\">\r\n                                                <Field as=\"select\" name=\"section\" class=\"form-select form-select-sm mt-1\" aria-label=\".form-select-sm example\">\r\n                                                    <option selected>This File belongs to?</option>\r\n                                                    {section.map((item, index) => {\r\n                                                        return (\r\n                                                            <option className='text-capitalize' value={item.id} key={index}>File({item.no_of_files}) {item.section_name}</option>\r\n                                                        )\r\n                                                    })}\r\n\r\n                                                </Field>\r\n                                                <ErrorMessage name=\"section\" component=\"small\" className='text-danger' />\r\n                                            </div>\r\n                                        </div>\r\n                                        <button className='border-0 bg-transparent outline-0' style={{ color: '#0D826E', cursor: 'pointer' }} type=\"submit\" > {showloader ? <i class=\"fas fa-spinner fa-spin\" style={{ color: '#071B4D' }}></i> : <i class=\"fad fa-plus-square\" style={{ color: '#071B4D' }}></i>} <small><strong>Click to Add File</strong></small></button>\r\n\r\n                                    </Form>\r\n                                )}\r\n                            </Formik>\r\n\r\n                            <button class=\"btn d-flex mx-auto mb-2\" onClick={publishCourse}><b> {publish ? <i class=\"fas fa-spinner fa-spin\"></i> : ''}<small> Skip and Publish</small></b></button>\r\n\r\n                            <Link to='/dashboard/create-a-course/videos' style={{ cursor: 'pointer' }}><strong><small><i class=\"fal fa-long-arrow-left\" style={{ color: '#0D826E' }}></i> Edit Previous Stage </small></strong></Link>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </section>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CourseFiles\r\n"]},"metadata":{},"sourceType":"module"}