{"ast":null,"code":"import _slicedToArray from\"C:/xampp/htdocs/FROMHOME/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Navbar from'./navbar';import{useParams}from'react-router';import axios from'axios';import{Baseurl,Mediaurl}from'../baseurl';import Skeleton from'react-loading-skeleton';import Footer from'./footer';import{useHistory}from'react-router';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import{CKEditor}from'@ckeditor/ckeditor5-react';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{useLocation}from'react-router';import{CircleProgress}from'react-gradient-progress';import ReactPlayer from'react-player';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Preview=function Preview(){document.title='Fromhome | Course Preview';var path=useLocation();var history=useHistory();var _useParams=useParams(),code=_useParams.code;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sections=_useState2[0],setSections=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),videoUrl=_useState4[0],setvideoUrl=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),note=_useState6[0],setNote=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),showNote=_useState10[0],setShowNote=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),review=_useState12[0],setReview=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),title=_useState14[0],setTitle=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),courseProgress=_useState16[0],setCourseProgress=_useState16[1];useEffect(function(){var token=sessionStorage.Token;if(token){axios.get(\"\".concat(Baseurl,\"coursepreview\"),{params:{code:code,token:token}}).then(function(res){if(res.data.section){setSections(res.data.section.sections);setTitle(res.data.section.title);setCourseProgress(res.data.section.progress);}else if(res.data.access){history.push(\"/course-details/\".concat(code));}}).catch(function(error){if(error.response.status===500){sessionStorage.setItem('Path',path.pathname);history.push('/');}});}},[]);useEffect(function(){var token=sessionStorage.Token;axios.get(\"\".concat(Baseurl,\"getnote\"),{params:{code:code},headers:{'Authorization':'Bearer'+token}}).then(function(res){if(res.data){setShowNote(res.data);}});},[]);var playVideo=function playVideo(video){setvideoUrl(video);//update progress\nvar token=sessionStorage.Token;axios.post(\"\".concat(Baseurl,\"progress\"),{code:code,video:video},{headers:{'Authorization':'Bearer'+token}}).then(function(res){});};var saveNote=function saveNote(){if(note){var token=sessionStorage.Token;setShow(true);axios.post(\"\".concat(Baseurl,\"savenote\"),{note:note,code:code},{headers:{'Authorization':'Bearer'+token}}).then(function(res){if(res.data==='saved'){setShow(false);toast(\"üëç Note Saved\",{autoClose:2000});}});}else{toast(\"‚úã Note Empty\",{autoClose:2000});}};var clearNote=function clearNote(){var token=sessionStorage.Token;setShowNote('');axios.post(\"\".concat(Baseurl,\"clearnote\"),{code:code},{headers:{'Authorization':'Bearer'+token}});};var dropReview=function dropReview(e){setReview(e.target.value);};var sendReview=function sendReview(e){e.preventDefault();if(review){setShow(true);var token=sessionStorage.Token;axios.post(\"\".concat(Baseurl,\"sendreview\"),{code:code,review:review},{headers:{'Authorization':'Bearer'+token}}).then(function(res){setShow(false);if(res.data==='sent'){toast(\"üëç Review Sent\",{autoClose:2000});}else{toast(\"üëç Review Sent\",{autoClose:2000});}});}else{setShow(false);toast(\"‚úã Type your review\",{autoClose:2000});}};var download=function download(url){var link=document.createElement('a');link.href=Mediaurl+url;document.body.appendChild(link);link.click();document.body.removeChild(link);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"section\",{class:\"container-fluid mt-2\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(ToastContainer,{})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-capitalize\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\uD83D\\uDCFA \",title?title:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\",style:{color:'#0D826E'}})]})}),/*#__PURE__*/_jsxs(\"div\",{class:\"row mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-md-8 align-items-center vid-cont mt-2\",\"data-aos\":\"fade-in\",children:/*#__PURE__*/_jsx(ReactPlayer,{className:\"react-player\",url:Mediaurl+videoUrl,width:\"100%\",height:\"100%\",controls:true,playing:true,playsinline:true})}),/*#__PURE__*/_jsxs(\"div\",{class:\"col-md-4  mt-3 px-0 accord-section\",\"data-aos\":\"fade-in\",children:[/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCDA Course Preview\"})}),/*#__PURE__*/_jsxs(\"ul\",{class:\"nav nav-pills p-2  justify-content-center\",id:\"pills-tab\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{class:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{class:\"nav-link active\",id:\"pills-home-tab\",\"data-bs-toggle\":\"pill\",\"data-bs-target\":\"#pills-home\",type:\"button\",role:\"tab\",\"aria-controls\":\"pills-home\",\"aria-selected\":\"true\",children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Sections\"})})})}),/*#__PURE__*/_jsx(\"li\",{class:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{class:\"nav-link\",id:\"pills-profile-tab\",\"data-bs-toggle\":\"pill\",\"data-bs-target\":\"#pills-profile\",type:\"button\",role:\"tab\",\"aria-controls\":\"pills-profile\",\"aria-selected\":\"false\",children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Note\"})})})}),/*#__PURE__*/_jsx(\"li\",{class:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{class:\"nav-link\",id:\"pills-profile-tab\",\"data-bs-toggle\":\"pill\",\"data-bs-target\":\"#pills-review\",type:\"button\",role:\"tab\",\"aria-controls\":\"pills-profile\",\"aria-selected\":\"false\",children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Review\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"tab-content\",id:\"pills-tabContent\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"tab-pane fade show active\",id:\"pills-home\",role:\"tabpanel\",\"aria-labelledby\":\"pills-home-tab\",children:sections.length?sections.map(function(item,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"accordion\",id:\"accordionExample\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"accordion-item\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"accordion-header\",id:\"headingOne\",children:/*#__PURE__*/_jsx(\"button\",{class:\"accordion-button fw-bold text-white border-0 rounded-0\",type:\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#\".concat(item.section_name.split(\" \").join(\"\")),\"aria-expanded\":\"true\",\"aria-controls\":\"collapseOne\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-capitalize\",children:item.section_name})})}),/*#__PURE__*/_jsx(\"div\",{id:item.section_name.split(\" \").join(\"\"),class:\"accordion-collapse  collapse\",\"aria-labelledby\":\"headingOne\",\"data-bs-parent\":\"#accordionExample\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"accordion-body bg-secondary py-0\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"row align-items-center course-part py-2\",children:item.no_of_videos.map(function(video,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-2\",onClick:function onClick(){return playVideo(video.video_url);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-play\",style:{color:'#071B4D'}})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-7 text-wrap\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-capitalize\",children:video.video_name})},index),/*#__PURE__*/_jsx(\"div\",{class:\"col-3\",children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[video.play_time,\"m\"]})})})]});})}),item.no_of_files.length?/*#__PURE__*/_jsxs(\"div\",{class:\"row align-items-center course-part py-2\",children:[/*#__PURE__*/_jsx(\"small\",{style:{color:'#0D826E'},children:/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-link\"}),\" Attachments\"]})}),item.no_of_files.map(function(file,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"col-7 text-wrap\",onClick:function onClick(){return download(file.file_url);},children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-capitalize\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-download\",style:{color:'#071B4D'}}),\" Download Attachment\"]})},index)});})]}):'']})})]})},index)});}):/*#__PURE__*/_jsx(\"div\",{class:\"accordion mt-2\",children:/*#__PURE__*/_jsx(Skeleton,{count:3})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"tab-pane fade\",id:\"pills-profile\",role:\"tabpanel\",\"aria-labelledby\":\"pills-profile-tab\",children:[/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor,data:showNote,onChange:function onChange(event,editor){var data=editor.getData();setNote(data);}}),/*#__PURE__*/_jsxs(\"small\",{onClick:clearNote,className:\"text-danger\",style:{fontSize:'12px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-trash\"}),/*#__PURE__*/_jsx(\"strong\",{children:\" Clear Note\"})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn d-flex mx-auto\",onClick:saveNote,disabled:show,children:/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[show?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):'',\" Save Note\"]})})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"tab-pane fade\",id:\"pills-review\",role:\"tabpanel\",\"aria-labelledby\":\"pills-profile-tab\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendReview,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row-1\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row row-2\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{id:\"login-card-inner\",children:\"Drop a Review\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{class:\"row row-2\",children:/*#__PURE__*/_jsx(\"textarea\",{onChange:dropReview})})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn d-flex mx-auto\",type:\"submit\",disabled:show,children:/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[show?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):'',\" Send Review\"]})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3\",children:[/*#__PURE__*/_jsx(CircleProgress,{percentage:courseProgress,strokeWidth:8,width:100}),/*#__PURE__*/_jsx(\"small\",{style:{color:'#071B4D'},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Your Progress, Welldone!\"})})]})]})]})]})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Preview;","map":{"version":3,"sources":["C:/xampp/htdocs/FROMHOME/frontend/src/components/landing_page/preview.js"],"names":["React","useEffect","useState","Navbar","useParams","axios","Baseurl","Mediaurl","Skeleton","Footer","useHistory","ClassicEditor","CKEditor","ToastContainer","toast","useLocation","CircleProgress","ReactPlayer","Preview","document","title","path","history","code","sections","setSections","videoUrl","setvideoUrl","note","setNote","show","setShow","showNote","setShowNote","review","setReview","setTitle","courseProgress","setCourseProgress","token","sessionStorage","Token","get","params","then","res","data","section","progress","access","push","catch","error","response","status","setItem","pathname","headers","playVideo","video","post","saveNote","autoClose","clearNote","dropReview","e","target","value","sendReview","preventDefault","download","url","link","createElement","href","body","appendChild","click","removeChild","color","length","map","item","index","section_name","split","join","no_of_videos","video_url","video_name","play_time","no_of_files","file","file_url","event","editor","getData","fontSize","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Navbar from './navbar'\r\nimport { useParams } from 'react-router'\r\nimport axios from 'axios';\r\nimport { Baseurl, Mediaurl } from '../baseurl';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport Footer from './footer';\r\nimport { useHistory } from 'react-router';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useLocation } from 'react-router';\r\nimport { CircleProgress } from 'react-gradient-progress'\r\nimport ReactPlayer from 'react-player'\r\n\r\nconst Preview = () => {\r\n  document.title = 'Fromhome | Course Preview'\r\n  const path = useLocation()\r\n  const history = useHistory();\r\n  const { code } = useParams();\r\n  const [sections, setSections] = useState([])\r\n  const [videoUrl, setvideoUrl] = useState('');\r\n  const [note, setNote] = useState();\r\n  const [show, setShow] = useState(false);\r\n  const [showNote, setShowNote] = useState('')\r\n  const [review, setReview] = useState('')\r\n  const [title, setTitle] = useState('')\r\n  const [courseProgress, setCourseProgress] = useState('')\r\n\r\n\r\n  useEffect(() => {\r\n    let token = sessionStorage.Token\r\n    if (token) {\r\n      axios.get(`${Baseurl}coursepreview`, {\r\n        params: { code: code, token: token }\r\n      }).then((res) => {\r\n        if (res.data.section) {\r\n          setSections(res.data.section.sections)\r\n          setTitle(res.data.section.title)\r\n          setCourseProgress(res.data.section.progress)\r\n        } else if (res.data.access) {\r\n          history.push(`/course-details/${code}`)\r\n        }\r\n      }).catch((error) => {\r\n        if (error.response.status === 500) {\r\n          sessionStorage.setItem('Path', path.pathname)\r\n          history.push('/')\r\n        }\r\n      })\r\n    }\r\n\r\n  }, [])\r\n\r\n\r\n  useEffect(() => {\r\n    let token = sessionStorage.Token\r\n    axios.get(`${Baseurl}getnote`, {\r\n      params: { code: code },\r\n      headers: {\r\n        'Authorization': 'Bearer' + token\r\n      }\r\n    }).then((res) => {\r\n      if (res.data) {\r\n        setShowNote(res.data)\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const playVideo = (video) => {\r\n    setvideoUrl(video)\r\n    \r\n\r\n\r\n    //update progress\r\n    let token = sessionStorage.Token\r\n    axios.post(`${Baseurl}progress`, { code: code, video: video }, {\r\n      headers: {\r\n        'Authorization': 'Bearer' + token\r\n      }\r\n    }).then((res) => {\r\n     \r\n    })\r\n  }\r\n\r\n\r\n\r\n  const saveNote = () => {\r\n    if (note) {\r\n      let token = sessionStorage.Token\r\n      setShow(true)\r\n      axios.post(`${Baseurl}savenote`, { note: note, code: code }, {\r\n        headers: {\r\n          'Authorization': 'Bearer' + token\r\n        }\r\n      }).then((res) => {\r\n        if (res.data === 'saved') {\r\n          setShow(false)\r\n          toast(\"üëç Note Saved\", {\r\n            autoClose: 2000,\r\n          })\r\n        }\r\n      })\r\n    } else {\r\n      toast(\"‚úã Note Empty\", {\r\n        autoClose: 2000,\r\n      })\r\n    }\r\n  }\r\n\r\n  const clearNote = () => {\r\n    let token = sessionStorage.Token\r\n    setShowNote('')\r\n    axios.post(`${Baseurl}clearnote`, { code: code }, {\r\n      headers: {\r\n        'Authorization': 'Bearer' + token\r\n      }\r\n    })\r\n  }\r\n\r\n  const dropReview = (e) => {\r\n    setReview(e.target.value)\r\n  }\r\n\r\n  const sendReview = (e) => {\r\n    e.preventDefault();\r\n    if (review) {\r\n      setShow(true)\r\n      let token = sessionStorage.Token\r\n      axios.post(`${Baseurl}sendreview`, { code: code, review: review }, {\r\n        headers: {\r\n          'Authorization': 'Bearer' + token\r\n        }\r\n      }).then((res) => {\r\n        setShow(false)\r\n        if (res.data === 'sent') {\r\n          toast(\"üëç Review Sent\", {\r\n            autoClose: 2000,\r\n          })\r\n        } else {\r\n          toast(\"üëç Review Sent\", {\r\n            autoClose: 2000,\r\n          })\r\n        }\r\n      })\r\n    } else {\r\n      setShow(false)\r\n      toast(\"‚úã Type your review\", {\r\n        autoClose: 2000,\r\n      })\r\n    }\r\n  }\r\n\r\n  const download = (url) => {\r\n    const link = document.createElement('a');\r\n    link.href = Mediaurl + url;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <section class=\"container-fluid mt-2\">\r\n        <small><ToastContainer /></small>\r\n        <small className='text-capitalize'><strong>üì∫ {title ? title : <i class=\"fas fa-spinner fa-spin\" style={{ color: '#0D826E' }}></i>}</strong></small>\r\n        <div class=\"row mx-auto\">\r\n          <div class=\"col-md-8 align-items-center vid-cont mt-2\" data-aos=\"fade-in\">\r\n            <ReactPlayer\r\n              className='react-player'\r\n              url={Mediaurl + videoUrl}\r\n              width='100%'\r\n              height='100%'\r\n              controls={true}\r\n              playing={true}\r\n              playsinline={true}\r\n            />\r\n          </div>\r\n\r\n\r\n          <div class=\"col-md-4  mt-3 px-0 accord-section\" data-aos=\"fade-in\">\r\n            <small><strong>üìö Course Preview</strong></small>\r\n            <ul class=\"nav nav-pills p-2  justify-content-center\" id=\"pills-tab\" role=\"tablist\">\r\n              <li class=\"nav-item\" role=\"presentation\">\r\n                <button class=\"nav-link active\" id=\"pills-home-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-home\" type=\"button\" role=\"tab\" aria-controls=\"pills-home\" aria-selected=\"true\"><small><strong>Sections</strong></small></button>\r\n              </li>\r\n              <li class=\"nav-item\" role=\"presentation\">\r\n                <button class=\"nav-link\" id=\"pills-profile-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-profile\" type=\"button\" role=\"tab\" aria-controls=\"pills-profile\" aria-selected=\"false\"><small><strong>Note</strong></small></button>\r\n              </li>\r\n              <li class=\"nav-item\" role=\"presentation\">\r\n                <button class=\"nav-link\" id=\"pills-profile-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-review\" type=\"button\" role=\"tab\" aria-controls=\"pills-profile\" aria-selected=\"false\"><small><strong>Review</strong></small></button>\r\n              </li>\r\n            </ul>\r\n\r\n\r\n            <div class=\"tab-content\" id=\"pills-tabContent\">\r\n              <div class=\"tab-pane fade show active\" id=\"pills-home\" role=\"tabpanel\" aria-labelledby=\"pills-home-tab\">\r\n\r\n                {sections.length ? sections.map((item, index) => {\r\n                  return (\r\n                    <>\r\n                      <div class=\"accordion\" id=\"accordionExample\" key={index}>\r\n                        <div class=\"accordion-item\">\r\n                          <h2 class=\"accordion-header\" id=\"headingOne\">\r\n                            <button class=\"accordion-button fw-bold text-white border-0 rounded-0\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target={`#${item.section_name.split(\" \").join(\"\")}`} aria-expanded=\"true\" aria-controls=\"collapseOne\" >\r\n                              <small className='text-capitalize'>{item.section_name}</small>\r\n                            </button>\r\n                          </h2>\r\n                          <div id={item.section_name.split(\" \").join(\"\")} class=\"accordion-collapse  collapse\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n                            <div class=\"accordion-body bg-secondary py-0\">\r\n                              {/* videos */}\r\n                              <div class=\"row align-items-center course-part py-2\">\r\n                                {item.no_of_videos.map((video, index) => {\r\n                                  return (\r\n                                    <>\r\n                                      <div class=\"col-2\" onClick={() => playVideo(video.video_url)}><i class=\"fad fa-play\" style={{ color: '#071B4D' }}></i></div>\r\n                                      <div class=\"col-7 text-wrap\" key={index}><small className='text-capitalize'>{video.video_name}</small></div>\r\n                                      <div class=\"col-3\"><small><strong>{video.play_time}m</strong></small></div>\r\n                                    </>\r\n                                  )\r\n                                })}\r\n                              </div>\r\n                              {/* attachements */}\r\n                              {item.no_of_files.length ? <div class=\"row align-items-center course-part py-2\">\r\n                                <small style={{ color: '#0D826E' }}><strong><i class=\"fad fa-link\"></i> Attachments</strong></small>\r\n                                {item.no_of_files.map((file, index) => {\r\n                                  return (\r\n                                    <>\r\n                                      <div class=\"col-7 text-wrap\" key={index} onClick={() => download(file.file_url)}><small className='text-capitalize'><i class=\"fad fa-download\" style={{ color: '#071B4D' }}></i> Download Attachment</small></div>\r\n\r\n                                    </>\r\n                                  )\r\n                                })}\r\n                              </div> : ''}\r\n\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )\r\n                }) : <div class=\"accordion mt-2\"><Skeleton count={3} /></div>}\r\n              </div>\r\n              <div class=\"tab-pane fade\" id=\"pills-profile\" role=\"tabpanel\" aria-labelledby=\"pills-profile-tab\">\r\n                <CKEditor\r\n                  editor={ClassicEditor}\r\n                  data={showNote}\r\n                  onChange={(event, editor) => {\r\n                    const data = editor.getData();\r\n                    setNote(data)\r\n                  }}\r\n                />\r\n\r\n                <small onClick={clearNote} className='text-danger' style={{ fontSize: '12px', cursor: 'pointer' }}><i class=\"fad fa-trash\"></i>\r\n                  <strong> Clear Note</strong></small>\r\n\r\n                <button class=\"btn d-flex mx-auto\" onClick={saveNote} disabled={show}><b><small>{show ? <i class=\"fas fa-spinner fa-spin\"></i> : ''} Save Note</small></b></button>\r\n\r\n              </div>\r\n\r\n              <div class=\"tab-pane fade\" id=\"pills-review\" role=\"tabpanel\" aria-labelledby=\"pills-profile-tab\">\r\n                <form onSubmit={sendReview}>\r\n                  <div class=\"row-1\">\r\n                    <div class=\"row row-2\"> <span id=\"login-card-inner\">Drop a Review</span> </div>\r\n                    <div class=\"row row-2\">\r\n                      <textarea onChange={dropReview} />\r\n                    </div>\r\n                  </div>\r\n                  <button class=\"btn d-flex mx-auto\" type=\"submit\" disabled={show}><b><small>{show ? <i class=\"fas fa-spinner fa-spin\"></i> : ''} Send Review</small></b></button>\r\n                </form>\r\n              </div>\r\n              <div className='text-center mt-3'>\r\n                <CircleProgress percentage={courseProgress} strokeWidth={8} width={100} />\r\n                <small style={{ color: '#071B4D' }}><strong>Your Progress, Welldone!</strong></small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </section>\r\n      <Footer />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Preview\r\n"]},"metadata":{},"sourceType":"module"}